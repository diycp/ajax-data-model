!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("adm",[],t):"object"==typeof exports?exports.adm=t():e.adm=t()}(this,function(){return function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){e.exports=a(1)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,a,n){if(!e.url||"string"!=typeof e.url)return console.trace("请求 URL API 不存在，或格式不对：",e.url),$.Deferred().reject("请求 URL API 不存在，或格式不对：",e.url);e.data&&e.data.btnWaiting&&(e.waiting=e.waiting||e.data.btnWaiting,delete e.data.btnWaiting),e.waiting&&o["default"].fnWaiting(e.waiting);var r="json";/^https?:\/\//.test(e.url)&&e.url.search(window.location.host)===-1&&(r="jsonp"),o["default"].fnBeforeAjax&&o["default"].fnBeforeAjax(e);var i=$.ajax($.extend(!0,{type:"GET",dataType:r},e.ajaxParam,{url:e.url,data:e.data})).done(function(r){return o["default"].fnAjaxDone(r,function(e){$.isFunction(n)&&n(r),$.isFunction(t)&&t(e)},a,e)}).fail(function(t){o["default"].fnAjaxFail(t,e),$.isFunction(a)&&a(t)}).always(function(){e.waiting&&o["default"].fnWaiting(e.waiting,!0)});return i}Object.defineProperty(t,"__esModule",{value:!0});var i=a(2),o=n(i),c=a(3);t["default"]={get:function(e,t,a){var n=this;if(e){var i=void 0,o=void 0,u=$.Deferred();return(0,c.isString)(e)&&(i=e),e.url?(i=e.cacheName||e.url,o=(0,c.getCacheDataByName)(i,e.fromCache),e.fromCache&&o?($.isFunction(t)&&t(o),u.resolve(o),u):(e.ajaxParam=$.extend(e.ajaxParam,{type:"GET"}),r(e,t,a,function(t){e.cache&&200===Number(t.code)&&n.save(i,t,e.cache)}))):e.hasOwnProperty("url")?(console.trace("配置了 URL 参数，但值为空：",e),u.reject("配置了 URL 参数，但值为空",e),u):(!i&&e&&(i=e.cacheName),o=(0,c.getCacheDataByName)(i,e.fromCache||t),$.isFunction(t)&&t(o),o)}},save:function(e,t,a){if(!e)return"";var n=void 0,i=void 0,o=$.Deferred();if((0,c.isString)(e))n=""+e,$.isFunction(t)?(0,c.saveTOCache)(n,t(),a):(0,c.saveTOCache)(n,t,a);else{if(e.url)return e.ajaxParam=$.extend({type:"POST"},e.ajaxParam),r(e,t,a,function(t){e.cache&&(n=n||e.url,(0,c.saveTOCache)(n,t,e.cache))});e.hasOwnProperty("url")?(console.trace("配置了 URL 参数，但值为空：",e),o.reject("配置了 URL 参数，但值为空",e)):e.cacheName&&((0,c.saveTOCache)(e.cacheName,e.data,e.cache),$.isFunction(t)&&t(i))}return o},"delete":function(e,t,a){if(!e)return"";var n=$.Deferred(),i=void 0;if((0,c.isString)(e)||e instanceof RegExp)(0,c.deleteCacheDataByName)(e,t),n.resolve();else{if(e.url)return r(e,t,a,{type:"DELETE"},function(){e.cache&&(i=e.cacheName||e.url,(0,c.deleteCacheDataByName)(i,e.cache))});e.hasOwnProperty("url")?(console.trace("配置了 URL 参数，但值为空：",e),n.reject("配置了 URL 参数，但值为空",e)):e&&e.cacheName&&((0,c.deleteCacheDataByName)(e.cacheName,e.cache),n.resolve())}return n},getAll:function(e){var t=(0,c.getCacheStor)(e),a=void 0,n=void 0,r={};for(a in t)if(t.hasOwnProperty(a)&&0===a.indexOf(o["default"].cachePrefix)){n=a.replace(o["default"].cachePrefix,"");try{r[n]=JSON.parse(t[a])}catch(i){r[n]=t[a]}}return r},clear:function(e){return(0,c.deleteCacheDataByName)(new RegExp(".*"),e),this},setCachePrefix:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];return/^_[_a-zA-Z]*_$/.test(e)?(t&&(this.clear("sessionStorage"),this.clear("localStorage"),this.clear()),o["default"].cachePrefix=e,this):(console.warn("以下划线开头和结尾，由字母、数字、或下划线组成"),this)},setSettings:function(e){var t=void 0;for(t in e)"cachePrefix"===t?this.setCachePrefix(e[t],!0):o["default"].hasOwnProperty(t)&&(o["default"][t]=e[t]);return o["default"]}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={cachePrefix:"__DM__",alert:function(e){console.trace(e)},fnWaiting:function(e,t){e&&e.$btn&&e.$btn.length&&(t?setTimeout(function(){e.$btn.html(e.defaultText||e.$btn.data("defaultText")).removeClass("disabled").prop("disabled",!1)},200):e.$btn.data("defaultText",e.$btn.html()).html(e.text||'<i class="fa fa-spinner rotateIn animated infinite"></i> 请求中...').addClass("disabled").prop("disabled",!0))},fnBeforeAjax:function(e){},fnAjaxDone:function(e,t,a,n){var r=$.Deferred();if(e&&200===e.code)t&&t(e),r.resolve(e);else{if(r.reject(e),a&&a(e),n.tipConfig===!1)return r;e.message=e.message||"系统错误",n.tipConfig||this.alert(e.message)}return r},fnAjaxFail:function(e,t){0===e.status?(this.alert("登录超时"),window.location.reload()):!1!==t.errAlert&&this.alert("数据请求失败: "+(e.responseText||e.statusText))}},e.exports=t["default"]},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){return e?(e=encodeURIComponent((""+e).replace(/\//g,".").replace(/^\./,"").replace(/(^\s+|\s+$)/g,"")),0!==e.indexOf(d["default"].cachePrefix)&&(e=d["default"].cachePrefix+e),e):""}function i(e){var t=m;return"sessionStorage"!==e&&"localStorage"!==e||(t=window[e]||m),t}function o(e,t){var a=void 0,n=i(t);if(!(e=r(e)))return a;try{a=JSON.parse(n.getItem(e))}catch(o){a=n.getItem(e)}return a||void 0}function c(e,t){var a=void 0,n=i(t);if(e instanceof RegExp)for(a in n)n.hasOwnProperty(a)&&0===a.indexOf(d["default"].cachePrefix)&&e.test(a.slice(d["default"].cachePrefix.length))&&n.removeItem(a);else(e=r(e))&&n.removeItem(e)}function u(e,t,a){if(e=r(e)){var n=i(a);n===m?m[e]=t:n.setItem(e,JSON.stringify(t))}}function f(e){var t="undefined"==typeof e?"undefined":s(e);return"string"===t||"number"===t}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.getCacheStor=i,t.getCacheDataByName=o,t.deleteCacheDataByName=c,t.saveTOCache=u,t.isString=f;var l=a(2),d=n(l),h=a(4),p=n(h),m=new p["default"]},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=function(){function e(){a(this,e),this.cache={}}return n(e,[{key:"getItem",value:function(e){return this.cache[e]}},{key:"setItem",value:function(e,t){this.cache[e]=t}},{key:"removeItem",value:function(e){delete this.cache[e]}}]),e}();t["default"]=r,e.exports=t["default"]}])});
//# sourceMappingURL=adm.jquery.min.js.map